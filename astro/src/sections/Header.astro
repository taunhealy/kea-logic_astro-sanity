---
import HeaderLink from '../components/HeaderLink.astro';

import { client } from '../../sanity';

// Fetch all pages for navigation
const pages = await client.fetch(`*[_type == "page" && defined(slug.current)] | order(orderRank) {
	title,
	"slug": slug.current
}`);
---

<header class="fixed w-full bg-black/80 backdrop-blur-md z-50 py-[16px]">
	<nav class="container mx-auto px-4 py-4">
		<div class="flex items-center justify-between">
			<!-- Logo/Site Title -->
			

			<!-- Navigation Links -->
			<div class="hidden md:flex items-center space-x-8">
				{
					pages.map((page: { title: string; slug: string }) => (
						<HeaderLink 
							href={page.slug === 'home' ? '/' : `/${page.slug}`}
							class="text-white"
						>
							{page.title}
						</HeaderLink>
					))
				}
			</div>

			<!-- Mobile Menu Button -->
			<button class="md:hidden text-white" id="mobile-menu-button">
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
				</svg>
			</button>
		</div>

		<!-- Mobile Menu -->
		<div class="hidden md:hidden" id="mobile-menu">
			<div class="pt-2 pb-4 space-y-1">
				{
					pages.map((page: { title: string; slug: string }) => (
						<HeaderLink 
							href={page.slug === 'home' ? '/' : `/${page.slug}`}
							class="block px-4 py-2"
						>
							{page.title}
						</HeaderLink>
					))
				}
			</div>
		</div>
	</nav>
</header>

<script>
	const mobileMenuButton = document.getElementById('mobile-menu-button');
	const mobileMenu = document.getElementById('mobile-menu');

	mobileMenuButton?.addEventListener('click', () => {
		mobileMenu?.classList.toggle('hidden');
	});
</script>